<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Narrative Ecosystem Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .logo-container {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .logo-svg {
            width: 50px;
            height: 50px;
            margin-bottom: 5px;
        }

        .logo-brand {
            font-size: 1.2em;
            font-weight: 700;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            margin-bottom: 2px;
            letter-spacing: 1px;
        }

        .logo-text {
            font-size: 0.7em;
            color: #FFD700;
            font-weight: 400;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            opacity: 0.9;
        }

        .container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            font-weight: 300;
            text-align: center;
            margin-bottom: 10px;
        }

        .header .subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.1em;
            font-weight: 300;
        }

        .mindmap-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .mindmap-section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            font-weight: 400;
            text-align: center;
        }

        #mindMap {
            border: none;
            background-color: #f8f9fa;
            border-radius: 10px;
            display: block;
            margin: 0 auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .report {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .report h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 30px;
            font-weight: 400;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
        }

        .report h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 30px 0 15px 0;
            font-weight: 500;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }

        .report p {
            margin: 15px 0;
            text-align: justify;
            font-size: 1em;
            line-height: 1.7;
        }

        .report ul, .report ol {
            margin: 20px 0;
            padding-left: 0;
        }

        .report li {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            list-style: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .report ol li {
            border-left-color: #e74c3c;
        }

        .report li strong {
            color: #2c3e50;
            font-weight: 600;
        }

        .report a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
            padding: 2px 6px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .report a:hover {
            background: #3498db;
            color: white;
            transform: translateY(-1px);
        }

        .overview-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .conclusion-box {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0 0 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .instructions p {
            margin: 0;
            font-size: 0.9em;
            color: #5a5a5a;
            font-style: italic;
        }

        .report table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .report th, .report td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .report th {
            background: #34495e;
            color: #fff;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .report {
                padding: 20px;
            }
            
            #mindMap {
                width: 100%;
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo-container">
            <svg class="logo-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <!-- Outer rounded square -->
                <defs>
                    <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <rect x="20" y="20" width="160" height="160" rx="25" ry="25" fill="url(#logoGradient)" stroke="none"/>
                
                <!-- Inner white background -->
                <rect x="30" y="30" width="140" height="140" rx="15" ry="15" fill="white"/>
                
                <!-- Signal waves -->
                <g stroke="url(#logoGradient)" stroke-width="8" fill="none" stroke-linecap="round">
                    <path d="M 70 100 Q 100 60, 130 100" />
                    <path d="M 60 100 Q 100 45, 140 100" />
                    <path d="M 50 100 Q 100 30, 150 100" />
                    <path d="M 40 100 Q 100 15, 160 100" />
                </g>
                
                <!-- Center dot -->
                <circle cx="100" cy="100" r="6" fill="url(#logoGradient)" opacity="0.7"/>
                
                <!-- Location pin bottom -->
                <path d="M 100 115 L 110 135 L 90 135 Z" fill="url(#logoGradient)"/>
            </svg>
            <div class="logo-brand">SIGNAL FIELD</div>
            <div class="logo-text">by Sentinel AI Systems</div>
        </div>

        <div class="header">
            <h1>Global Narrative Ecosystem Analysis</h1>
            <p class="subtitle">Intelligence Report on Key Players, Relationships, and Emerging Patterns (July 22-23, 2025)</p>
        </div>

        <div class="mindmap-section">
            <h2>Interactive Entity Relationship Network</h2>
            <div class="instructions">
                <p>üñ±Ô∏è Hover over nodes to see detailed information ‚Ä¢ Click to select and highlight relationships ‚Ä¢ Selected nodes show in gold</p>
            </div>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #2ecc71;"></div>
                    <span>Ally</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #e74c3c;"></div>
                    <span>Rival</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3498db;"></div>
                    <span>Echo</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f39c12;"></div>
                    <span>Independent</span>
                </div>
            </div>
            <canvas id="mindMap" width="800" height="600"></canvas>
        </div>

        <div class="report">
            <h2>Narrative Intelligence Analysis Report</h2>
            
            <h3>Executive Summary</h3>
            <div class="overview-box">
                <p>
                    This report analyzes global narrative patterns in the narrative ecosystem over the past 24 hours (July 22-23, 2025, ending at 12:12 AM MDT), focusing on key governments, individuals, companies, and online agents across Geopolitics, Technology, Economics, Governance, Health, Media, Psychology, Fringe, Environment, and Faith. It identifies alliances, rivalries, echo chambers, and media coordination, highlighting themes like power shifts, AI dominance, and cultural divides.
                </p>
            </div>

            <h3>Key Entities and Strategic Relationships</h3>
            <p>
                The narrative ecosystem is shaped by a complex interplay of governments, companies, and influencers, with distinct alliances and rivalries driving discourse. The network visualization above illustrates these connections and their influence patterns.
            </p>
            
            <ul>
                <li>
                    <strong>United States:</strong> Drives narratives via UNESCO withdrawal and US-Japan trade deal, reinforcing "America First" policies. Allies with Japan; rivals with China in tech and geopolitics. 
                    <a href="https://www.reuters.com/world/trump-pulls-us-out-un-cultural-agency-unesco-second-time-2025-07-22/" target="_blank">Reuters</a>
                </li>
                <li>
                    <strong>China:</strong> Central in tech rivalry, with narratives around AI data centers and cybersecurity breaches. Rivals with US; influences BRICS narratives. 
                    <a href="https://www.youtube.com/watch?v=Jvq0HGpKXb8" target="_blank">Bloomberg</a>
                </li>
                <li>
                    <strong>OpenAI:</strong> Leads AI narratives with Stargate project, allied with Oracle and SoftBank. Rivals with China in AI dominance; influences media via partnerships. 
                    <a href="https://www.reuters.com/business/openai-oracle-deepen-ai-data-center-push-with-45-gigawatt-stargate-expansion-2025-07-22/" target="_blank">Reuters</a>
                </li>
                <li>
                    <strong>Cedars-Sinai:</strong> Advances health narratives with Xaia AI therapist, allied with healthcare tech communities. 
                    <a href="https://www.latimes.com/science/story/2025-07-22/doctors-at-cedars-sinai-develop-ai-powered-mental-health-robot-therapist" target="_blank">Los Angeles Times</a>
                </li>
                <li>
                    <strong>Leor Zmigrod:</strong> Independent researcher shaping psychology narratives with "The Ideological Brain," focusing on extremism. 
                    <a href="https://www.nytimes.com/2025/03/31/books/review/the-ideological-brain-leor-zmigrod.html" target="_blank">NYT</a>
                </li>
                <li>
                    <strong>@RandyEstrella1:</strong> X influencer amplifying geopolitical narratives (Trump, Putin, BRICS), creating echo chambers in geopolitics communities. 
                    <a href="https://x.com/RandyEstrella1" target="_blank">X Profile</a>
                </li>
                <li>
                    <strong>Traditional Media:</strong> Outlets like Reuters and The New York Times frame narratives across domains, with potential coordination via tech partnerships. 
                    <a href="https://www.nytimes.com/2025/07/22/us/politics/trump-japan-trade-deal.html" target="_blank">NYT</a>
                </li>
            </ul>

            <h3>Dominant Narrative Themes and Strategic Tensions</h3>
            <p>
                Several narrative battlegrounds define the current discourse, reflecting competing visions across domains:
            </p>
            
            <ol>
                <li>
                    <strong>Geopolitical Power Shifts:</strong> US withdrawal from UNESCO and trade deals signal nationalism vs. globalism tensions, amplified by influencers like @RandyEstrella1.
                </li>
                <li>
                    <strong>AI and Tech Dominance:</strong> US-China rivalry in AI data centers and cybersecurity shapes tech narratives, with OpenAI‚Äôs Stargate project central.
                </li>
                <li>
                    <strong>Economic Uncertainty:</strong> US-Japan trade deals and recession risks drive economic narratives, with BRICS and dedollarization gaining traction on X.
                </li>
                <li>
                    <strong>Cultural and Ideological Divides:</strong> UNESCO withdrawal and identity politics (e.g., queer Trump supporters) highlight cultural polarization.
                </li>
            </ol>

            <h3>Echo Chamber Dynamics and Manipulation Patterns</h3>
            <p>
                Social media platforms, especially X, foster echo chambers by amplifying polarized views on geopolitics, AI, and identity. Algorithmic prioritization reinforces confirmation bias, with influencers like @RandyEstrella1 driving geopolitical echo chambers. Media coordination is evident in consistent AI and trade narrative framing across outlets, with potential censorship in limited UNESCO withdrawal coverage, though evidence is inconclusive.
            </p>

            <h3>Coordination Analysis and Narrative Control</h3>
            <p>
                Subtle media coordination is observed in AI narratives (e.g., Stargate coverage) and trade deals, with outlets aligning messaging. Limited discussion of UNESCO withdrawal suggests possible narrative control, potentially marginalizing critical voices. X algorithms elevate nationalist and tech-optimist content, amplifying echo chambers over balanced discourse.
            </p>

            <h3>Key Entities and Relationships</h3>
            <table>
                <tr>
                    <th>Entity</th>
                    <th>Type</th>
                    <th>Relationship Type</th>
                    <th>Connected To</th>
                    <th>Notes</th>
                </tr>
                <tr>
                    <td>United States</td>
                    <td>Government</td>
                    <td>Ally</td>
                    <td>Japan</td>
                    <td>Trade deal with 15% tariff, $550B investment.</td>
                </tr>
                <tr>
                    <td>United States</td>
                    <td>Government</td>
                    <td>Rival</td>
                    <td>China</td>
                    <td>Tech competition, AI data center rivalry.</td>
                </tr>
                <tr>
                    <td>OpenAI</td>
                    <td>Company</td>
                    <td>Ally</td>
                    <td>Oracle, SoftBank</td>
                    <td>Stargate project, 4.5 GW AI data center expansion.</td>
                </tr>
                <tr>
                    <td>China</td>
                    <td>Government</td>
                    <td>Rival</td>
                    <td>United States</td>
                    <td>Tech and AI competition, cybersecurity breaches.</td>
                </tr>
                <tr>
                    <td>Leor Zmigrod</td>
                    <td>Individual</td>
                    <td>Independent</td>
                    <td>Research community</td>
                    <td>Research on extremist brains, cognitive rigidity.</td>
                </tr>
                <tr>
                    <td>@RandyEstrella1</td>
                    <td>Online Agent</td>
                    <td>Echo</td>
                    <td>Geopolitics community</td>
                    <td>Discusses Trump, Putin, BRICS.</td>
                </tr>
                <tr>
                    <td>Cedars-Sinai</td>
                    <td>Company</td>
                    <td>Ally</td>
                    <td>Healthcare tech community</td>
                    <td>Developed Xaia, AI-powered mental health therapy.</td>
                </tr>
            </table>

            <div class="conclusion-box">
                <h3 style="color: white; border: none; padding: 0; margin-bottom: 15px;">Strategic Assessment</h3>
                <p>
                    The narrative ecosystem over the past 24 hours reflects intense activity in geopolitics, technology, and economics, driven by actors like the US, China, OpenAI, and influencers like @RandyEstrella1. Alliances (US-Japan, OpenAI-Oracle) and rivalries (US-China) shape discourse, with echo chambers on X amplifying polarized views. Media coordination in AI and trade narratives, alongside potential censorship in UNESCO discussions, suggests strategic narrative control. Ongoing monitoring of algorithmic biases and media partnerships is critical for understanding these dynamics.
                </p>
            </div>
        </div>

        <div class="disclaimer">
            <h4>‚ö†Ô∏è Important Disclaimers & Limitations</h4>
            
            <div class="warning">
                <strong>Experimental Analysis Tool:</strong> This report is generated by an experimental AI system designed for narrative pattern analysis. The findings represent algorithmic interpretation of publicly available information and should not be considered definitive intelligence or factual reporting.
            </div>

            <p><strong>Data Sources & Accuracy:</strong> Information is aggregated from web searches, social media platforms, news articles, and other publicly accessible sources. The AI system may misinterpret context, miss important nuances, or include outdated information. All claims should be independently verified.</p>

            <p><strong>Bias & Limitations:</strong> This analysis reflects the inherent biases present in training data and algorithmic processing. The system may overemphasize certain sources, miss important perspectives, or mischaracterize relationships between entities. Geographic and linguistic limitations may result in Western/English-language bias.</p>

            <p><strong>Relationship Interpretations:</strong> The "ally," "rival," "echo," and other relationship classifications are algorithmic interpretations based on public statements and observable patterns. These do not represent confirmed business relationships, personal opinions, or strategic partnerships.</p>

            <p><strong>Not Investment or Legal Advice:</strong> This analysis is for informational and educational purposes only. It does not constitute investment advice, business intelligence, legal counsel, or professional recommendations. Users should conduct their own research and consult qualified professionals before making decisions.</p>

            <div class="contact">
                <strong>Research & Development:</strong> This is an ongoing research project exploring automated narrative analysis. For questions, feedback, or to report inaccuracies, please contact the development team or submit issues via the project repository.
            </div>

            <p><strong>Privacy & Ethics:</strong> This analysis focuses on publicly available statements and activities. No private communications, confidential information, or personal data is accessed or analyzed. The system aims to promote transparency in information ecosystems while respecting individual privacy.</p>

            <p><strong>Updates & Temporal Limitations:</strong> Narrative ecosystems evolve rapidly. This analysis reflects patterns observed at the time of generation and may not capture subsequent developments, statement retractions, or relationship changes.</p>

            <p style="text-align: center; margin-top: 25px; font-size: 0.85em; opacity: 0.7;">
                Generated by Autonomous Intelligence Analysis System ‚Ä¢ Report Generated: <span id="timestamp"></span>
            </p>
        </div>
    </div>

    <script>
        // Add timestamp
        document.getElementById('timestamp').textContent = new Date().toLocaleString();
    </script>

    <script>
        const canvas = document.getElementById('mindMap');
        const ctx = canvas.getContext('2d');

        // Node and edge data based on analysis
        const nodes = [
            { id: 'US', label: 'United\nStates', x: 400, y: 120, color: '#3498db', size: 50, type: 'government' },
            { id: 'China', label: 'China', x: 120, y: 250, color: '#e74c3c', size: 45, type: 'government' },
            { id: 'OpenAI', label: 'OpenAI', x: 680, y: 250, color: '#2ecc71', size: 45, type: 'company' },
            { id: 'CedarsSinai', label: 'Cedars-\nSinai', x: 180, y: 420, color: '#9b59b6', size: 40, type: 'company' },
            { id: 'Zmigrod', label: 'Leor\nZmigrod', x: 280, y: 180, color: '#f39c12', size: 38, type: 'individual' },
            { id: 'RandyEstrella1', label: '@Randy\nEstrella1', x: 520, y: 160, color: '#3498db', size: 32, type: 'influencer' },
            { id: 'Media', label: 'Traditional\nMedia', x: 400, y: 350, color: '#7f8c8d', size: 35, type: 'media' }
        ];

        const edges = [
            { from: 'US', to: 'China', type: 'rival', label: 'Rival', color: '#e74c3c', width: 3 },
            { from: 'US', to: 'OpenAI', type: 'ally', label: 'Ally', color: '#2ecc71', width: 2 },
            { from: 'OpenAI', to: 'CedarsSinai', type: 'ally', label: 'Tech Ally', color: '#2ecc71', width: 2 },
            { from: 'RandyEstrella1', to: 'US', type: 'echo', label: 'Amplifies', color: '#3498db', width: 2 },
            { from: 'Zmigrod', to: 'Media', type: 'independent', label: 'Quoted', color: '#f39c12', width: 1 },
            { from: 'Media', to: 'OpenAI', type: 'ally', label: 'Partner', color: '#2ecc71', width: 2 },
            { from: 'China', to: 'OpenAI', type: 'rival', label: 'Competes', color: '#e74c3c', width: 2 }
        ];

        // Node details for tooltips
        const nodeDetails = {
            'US': {
                description: 'Drives geopolitical narratives via UNESCO withdrawal and trade deals, reinforcing "America First" policies.',
                connections: ['Allies with Japan, OpenAI', 'Rivals with China', 'Amplified by @RandyEstrella1']
            },
            'China': {
                description: 'Central in tech rivalry, pushing AI and BRICS narratives.',
                connections: ['Rivals with US, OpenAI', 'Influences BRICS discourse']
            },
            'OpenAI': {
                description: 'Leads AI narratives with Stargate project, allied with Oracle and SoftBank.',
                connections: ['Allies with US, Cedars-Sinai', 'Rivals with China', 'Partners with media']
            },
            'CedarsSinai': {
                description: 'Advances health narratives with Xaia AI therapist, allied with tech communities.',
                connections: ['Allies with OpenAI', 'Influences health discourse']
            },
            'Zmigrod': {
                description: 'Independent researcher shaping psychology narratives on extremism.',
                connections: ['Quoted by media', 'Independent influence']
            },
            'RandyEstrella1': {
                description: 'X influencer amplifying geopolitical narratives (Trump, Putin, BRICS).',
                connections: ['Amplifies US narratives', 'Creates echo chambers']
            },
            'Media': {
                description: 'Frames narratives across domains, with potential coordination via tech partnerships.',
                connections: ['Partners with OpenAI', 'Quotes Zmigrod']
            }
        };

        // Draw connections first (so they appear behind nodes)
        edges.forEach(edge => {
            const fromNode = nodes.find(n => n.id === edge.from);
            const toNode = nodes.find(n => n.id === edge.to);
            
            const dx = toNode.x - fromNode.x;
            const dy = toNode.y - fromNode.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            const fromRadius = fromNode.size;
            const toRadius = toNode.size;
            
            const startX = fromNode.x + (dx / distance) * fromRadius;
            const startY = fromNode.y + (dy / distance) * fromRadius;
            const endX = toNode.x - (dx / distance) * toRadius;
            const endY = toNode.y - (dy / distance) * toRadius;
            
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.strokeStyle = edge.color;
            ctx.lineWidth = edge.width;
            ctx.setLineDash(edge.type === 'shadow' ? [5, 5] : []);
            ctx.stroke();
            ctx.setLineDash([]);
            
            const angle = Math.atan2(dy, dx);
            const arrowLength = 15;
            ctx.beginPath();
            ctx.moveTo(endX, endY);
            ctx.lineTo(endX - arrowLength * Math.cos(angle - Math.PI/6), endY - arrowLength * Math.sin(angle - Math.PI/6));
            ctx.moveTo(endX, endY);
            ctx.lineTo(endX - arrowLength * Math.cos(angle + Math.PI/6), endY - arrowLength * Math.sin(angle + Math.PI/6));
            ctx.stroke();
            
            const midX = (startX + endX) / 2;
            const midY = (startY + endY) / 2;
            
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fillRect(midX - 20, midY - 18, 40, 16);
            ctx.strokeStyle = edge.color;
            ctx.lineWidth = 1;
            ctx.strokeRect(midX - 20, midY - 18, 40, 16);
            
            ctx.fillStyle = edge.color;
            ctx.font = 'bold 11px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(edge.label, midX, midY - 10);
        });

        // Draw nodes with enhanced styling
        nodes.forEach(node => {
            const gradient = ctx.createRadialGradient(node.x - 10, node.y - 10, 0, node.x, node.y, node.size);
            gradient.addColorStop(0, node.color);
            gradient.addColorStop(1, node.color + '80');
            
            ctx.beginPath();
            ctx.arc(node.x, node.y, node.size, 0, 2 * Math.PI);
            ctx.fillStyle = gradient;
            ctx.fill();
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
            ctx.shadowBlur = 2;
            
            const lines = node.label.split('\n');
            const lineHeight = 14;
            const startY = node.y - ((lines.length - 1) * lineHeight) / 2;
            
            lines.forEach((line, index) => {
                ctx.fillText(line, node.x, startY + index * lineHeight);
            });
            
            ctx.shadowBlur = 0;
        });

        // Interactive features
        let hoveredNode = null;
        let selectedNode = null;
        const tooltip = document.createElement('div');
        tooltip.style.cssText = `
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            display: none;
            max-width: 200px;
            line-height: 1.4;
        `;
        document.body.appendChild(tooltip);

        function drawMindMap() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            edges.forEach(edge => {
                const fromNode = nodes.find(n => n.id === edge.from);
                const toNode = nodes.find(n => n.id === edge.to);
                
                const dx = toNode.x - fromNode.x;
                const dy = toNode.y - fromNode.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                const fromRadius = fromNode.size;
                const toRadius = toNode.size;
                
                const startX = fromNode.x + (dx / distance) * fromRadius;
                const startY = fromNode.y + (dy / distance) * fromRadius;
                const endX = toNode.x - (dx / distance) * toRadius;
                const endY = toNode.y - (dy / distance) * toRadius;
                
                const isHighlighted = (hoveredNode && (hoveredNode.id === edge.from || hoveredNode.id === edge.to)) ||
                                    (selectedNode && (selectedNode.id === edge.from || selectedNode.id === edge.to));
                
                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.strokeStyle = isHighlighted ? edge.color : edge.color + '60';
                ctx.lineWidth = isHighlighted ? edge.width + 1 : edge.width;
                ctx.setLineDash(edge.type === 'shadow' ? [5, 5] : []);
                ctx.stroke();
                ctx.setLineDash([]);
                
                const angle = Math.atan2(dy, dx);
                const arrowLength = 15;
                ctx.beginPath();
                ctx.moveTo(endX, endY);
                ctx.lineTo(endX - arrowLength * Math.cos(angle - Math.PI/6), endY - arrowLength * Math.sin(angle - Math.PI/6));
                ctx.moveTo(endX, endY);
                ctx.lineTo(endX - arrowLength * Math.cos(angle + Math.PI/6), endY - arrowLength * Math.sin(angle + Math.PI/6));
                ctx.stroke();
                
                if (isHighlighted) {
                    const midX = (startX + endX) / 2;
                    const midY = (startY + endY) / 2;
                    
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                    ctx.fillRect(midX - 25, midY - 20, 50, 18);
                    ctx.strokeStyle = edge.color;
                    ctx.lineWidth = 2;
                    ctx.strokeRect(midX - 25, midY - 20, 50, 18);
                    
                    ctx.fillStyle = edge.color;
                    ctx.font = 'bold 12px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(edge.label, midX, midY - 11);
                }
            });

            nodes.forEach(node => {
                const isHovered = hoveredNode && hoveredNode.id === node.id;
                const isSelected = selectedNode && selectedNode.id === node.id;
                const isHighlighted = isHovered || isSelected;
                
                ctx.beginPath();
                ctx.arc(node.x + 3, node.y + 3, node.size + (isHighlighted ? 5 : 0), 0, 2 * Math.PI);
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fill();
                
                const gradient = ctx.createRadialGradient(node.x - 10, node.y - 10, 0, node.x, node.y, node.size + (isHighlighted ? 5 : 0));
                gradient.addColorStop(0, node.color);
                gradient.addColorStop(1, isHighlighted ? node.color : node.color + '80');
                
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.size + (isHighlighted ? 5 : 0), 0, 2 * Math.PI);
                ctx.fillStyle = gradient;
                ctx.fill();
                ctx.strokeStyle = isSelected ? '#FFD700' : '#fff';
                ctx.lineWidth = isSelected ? 5 : 3;
                ctx.stroke();
                
                ctx.fillStyle = '#fff';
                ctx.font = `bold ${isHighlighted ? 13 : 12}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
                ctx.shadowBlur = 2;
                
                const lines = node.label.split('\n');
                const lineHeight = 14;
                const startY = node.y - ((lines.length - 1) * lineHeight) / 2;
                
                lines.forEach((line, index) => {
                    ctx.fillText(line, node.x, startY + index * lineHeight);
                });
                
                ctx.shadowBlur = 0;
            });
        }

        function getNodeAt(x, y) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            const canvasX = (x - rect.left) * scaleX;
            const canvasY = (y - rect.top) * scaleY;
            
            return nodes.find(node => {
                const dx = canvasX - node.x;
                const dy = canvasY - node.y;
                return Math.sqrt(dx * dx + dy * dy) <= node.size + 5;
            });
        }

        function showTooltip(node, x, y) {
            const details = nodeDetails[node.id];
            tooltip.innerHTML = `
                <strong>${node.label.replace('\n', ' ')}</strong><br>
                ${details.description}<br><br>
                <em>Key Relationships:</em><br>
                ${details.connections.map(c => `‚Ä¢ ${c}`).join('<br>')}
            `;
            tooltip.style.left = x + 15 + 'px';
            tooltip.style.top = y - 10 + 'px';
            tooltip.style.display = 'block';
        }

        function hideTooltip() {
            tooltip.style.display = 'none';
        }

        canvas.addEventListener('mousemove', (e) => {
            const node = getNodeAt(e.clientX, e.clientY);
            if (node !== hoveredNode) {
                hoveredNode = node;
                drawMindMap();
                
                if (node) {
                    canvas.style.cursor = 'pointer';
                    showTooltip(node, e.clientX, e.clientY);
                } else {
                    canvas.style.cursor = 'default';
                    hideTooltip();
                }
            } else if (node) {
                showTooltip(node, e.clientX, e.clientY);
            }
        });

        canvas.addEventListener('mouseleave', () => {
            hoveredNode = null;
            hideTooltip();
            canvas.style.cursor = 'default';
            drawMindMap();
        });

        canvas.addEventListener('click', (e) => {
            const node = getNodeAt(e.clientX, e.clientY);
            if (node) {
                selectedNode = selectedNode && selectedNode.id === node.id ? null : node;
                drawMindMap();
                
                if (selectedNode) {
                    const reportSection = document.querySelector('.report');
                    reportSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        });

        function resizeCanvas() {
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            const scale = Math.min(1, rect.width / 800);
            
            canvas.style.width = (800 * scale) + 'px';
            canvas.style.height = (600 * scale) + 'px';
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        drawMindMap();
    </script>
</body>
</html>
