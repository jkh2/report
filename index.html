<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COVID to AI Ethics Pivot Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .logo-container {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .logo-svg {
            width: 50px;
            height: 50px;
            margin-bottom: 5px;
        }

        .logo-brand {
            font-size: 1.2em;
            font-weight: 700;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            margin-bottom: 2px;
            letter-spacing: 1px;
        }

        .logo-text {
            font-size: 0.7em;
            color: #FFD700;
            font-weight: 400;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            opacity: 0.9;
        }

        .container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            font-weight: 300;
            text-align: center;
            margin-bottom: 10px;
        }

        .header .subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.1em;
            font-weight: 300;
        }

        .mindmap-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .mindmap-section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            font-weight: 400;
            text-align: center;
        }

        #mindMap {
            border: none;
            background-color: #f8f9fa;
            border-radius: 10px;
            display: block;
            margin: 0 auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .report {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .report h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 30px;
            font-weight: 400;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
        }

        .report h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 30px 0 15px 0;
            font-weight: 500;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }

        .report p {
            margin: 15px 0;
            text-align: justify;
            font-size: 1em;
            line-height: 1.7;
        }

        .report ul, .report ol {
            margin: 20px 0;
            padding-left: 0;
        }

        .report li {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            list-style: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .report ol li {
            border-left-color: #e74c3c;
        }

        .report li strong {
            color: #2c3e50;
            font-weight: 600;
        }

        .report a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
            padding: 2px 6px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .report a:hover {
            background: #3498db;
            color: white;
            transform: translateY(-1px);
        }

        .overview-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .conclusion-box {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0 0 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .instructions p {
            margin: 0;
            font-size: 0.9em;
            color: #5a5a5a;
            font-style: italic;
        }

        .report table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .report th, .report td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .report th {
            background: #34495e;
            color: #fff;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .report {
                padding: 20px;
            }
            
            #mindMap {
                width: 100%;
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo-container">
            <svg class="logo-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <rect x="20" y="20" width="160" height="160" rx="25" ry="25" fill="url(#logoGradient)" stroke="none"/>
                <rect x="30" y="30" width="140" height="140" rx="15" ry="15" fill="white"/>
                <g stroke="url(#logoGradient)" stroke-width="8" fill="none" stroke-linecap="round">
                    <path d="M 70 100 Q 100 60, 130 100" />
                    <path d="M 60 100 Q 100 45, 140 100" />
                    <path d="M 50 100 Q 100 30, 150 100" />
                    <path d="M 40 100 Q 100 15, 160 100" />
                </g>
                <circle cx="100" cy="100" r="6" fill="url(#logoGradient)" opacity="0.7"/>
                <path d="M 100 115 L 110 135 L 90 135 Z" fill="url(#logoGradient)"/>
            </svg>
            <div class="logo-brand">SIGNAL FIELD</div>
            <div class="logo-text">by Sentinel AI Systems</div>
        </div>

        <div class="header">
            <h1>COVID to AI Ethics Pivot Analysis</h1>
            <p class="subtitle">Intelligence Report on Key Players, Relationships, and Narrative Patterns (2020-2025)</p>
        </div>

        <div class="mindmap-section">
            <h2>Interactive Entity Relationship Network</h2>
            <div class="instructions">
                <p>üñ±Ô∏è Hover over nodes to see detailed information ‚Ä¢ Click to select and highlight relationships ‚Ä¢ Selected nodes show in gold</p>
            </div>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #2ecc71;"></div>
                    <span>Ally</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #e74c3c;"></div>
                    <span>Rival</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3498db;"></div>
                    <span>Echo</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f39c12;"></div>
                    <span>Independent</span>
                </div>
            </div>
            <canvas id="mindMap" width="800" height="600"></canvas>
        </div>

        <div class="report">
            <h2>Narrative Intelligence Analysis Report</h2>
            
            <h3>Executive Summary</h3>
            <div class="overview-box">
                <p>
                    This report analyzes the pivot of key entities from COVID-19 narratives (2020-2022) to AI ethics and regulation narratives (2023-2025), focusing on health, technology, and governance domains. It identifies players like Patrick Vallance, Bill Gates, Google, and Microsoft, who shaped COVID responses (lockdowns, vaccines, data platforms) and now drive AI regulation debates (ethics, risk mitigation). The analysis highlights alliances, echo chambers, and potential manipulation patterns, suggesting coordinated efforts to control public discourse and markets, with financial and power motives.
                </p>
            </div>

            <h3>Key Entities and Strategic Relationships</h3>
            <p>
                The narrative ecosystem reflects a shift from COVID control measures to AI regulation advocacy, with key players leveraging their influence across both crises. The interactive network above visualizes these connections and their impact.
            </p>
            
            <ul>
                <li>
                    <strong>Patrick Vallance:</strong> Former UK Chief Scientific Adviser, pushed COVID lockdowns and vaccines, now Science Minister advocating AI regulation.
                </li>
                <li>
                    <strong>Bill Gates:</strong> Funded COVID vaccine programs (e.g., CEPI, GAVI), now invests in AI startups and ethics discussions.
                </li>
                <li>
                    <strong>Google:</strong> Provided COVID data platforms, now leads AI development (Gemini) and ethics advocacy.
                </li>
                <li>
                    <strong>Microsoft:</strong> Supported COVID vaccine data, now invests in AI (OpenAI) and regulation frameworks.
                </li>
                <li>
                    <strong>WHO:</strong> Drove COVID health mandates, now pushes AI in healthcare regulation.
                </li>
                <li>
                    <strong>CNN:</strong> Amplified COVID fear narratives, now highlights AI risks and regulation needs.
                </li>
            </ul>

            <h3>Detailed Narrative Analysis</h3>
            <h4>COVID-19 Narratives (2020-2022)</h4>
            <p>
                From 2020-2022, governments, tech companies, and influencers pushed COVID control measures, often using fear-based narratives around case counts, deaths, and public health compliance. Lockdowns, mask mandates, and vaccine rollouts dominated discourse, with media amplifying government and health organization messaging.
            </p>
            <ul>
                <li><strong>Key Entities:</strong> Vallance, Gates, WHO, Google, Microsoft, CNN.</li>
                <li><strong>Relationships:</strong> Vallance-WHO alliance, Gates-Big Pharma alliance, Google-Microsoft tech alliance, CNN echo for government.</li>
                <li><strong>Manipulation:</strong> Potential coordinated messaging via media and health orgs, with X posts noting profit motives (e.g., Gates‚Äô vaccine investments).</li>
            </ul>

            <h4>AI Ethics and Regulation Narratives (2023-2025)</h4>
            <p>
                Since 2023, the same entities have pivoted to AI ethics and regulation, emphasizing risks like bias, job loss, and truth distortion. Policies like the EU AI Act and California‚Äôs AI laws mirror COVID‚Äôs mandatory health measures, framed as public safety but potentially favoring big players.
            </p>
            <ul>
                <li><strong>Key Entities:</strong> Vallance, Gates, Google, Microsoft, EU Parliament, CNN.</li>
                <li><strong>Relationships:</strong> Vallance-EU alliance, Gates-Microsoft alliance, Google-CNN echo, tech-government collaboration.</li>
                <li><strong>Manipulation:</strong> Possible coordinated risk amplification, with X posts suggesting profit-driven regulation pushes.</li>
            </ul>

            <h3>Echo Chamber Dynamics and Manipulation Patterns</h3>
            <p>
                Platforms like X amplify polarized views, with pro-regulation (e.g., EU, Vallance) and anti-regulation (e.g., tech skeptics) echo chambers. COVID narratives used fear (e.g., death counts) to drive compliance; AI narratives use risks (e.g., bias) to justify regulation. Potential state and corporate coordination is observed, though evidence is limited. Financial ties (e.g., Vallance‚Äôs GSK shares, Gates‚Äô AI investments) suggest profit motives behind narrative shifts.
            </p>

            <h3>Coordination Analysis and Narrative Control</h3>
            <p>
                Subtle coordination is detected in the pivot from COVID to AI narratives, with entities like Vallance and Gates leveraging their COVID influence to shape AI discourse. Media outlets like CNN echo both crises‚Äô narratives, potentially overshadowing independent voices. X algorithms amplify regulatory rhetoric, mirroring COVID‚Äôs compliance push. Users are advised to verify financial ties and cross-reference primary sources to counter bias.
            </p>

            <h3>Key Entities and Relationships</h3>
            <table>
                <tr>
                    <th>Entity</th>
                    <th>Type</th>
                    <th>Relationship Type</th>
                    <th>Connected To</th>
                    <th>Notes</th>
                </tr>
                <tr>
                    <td>Patrick Vallance</td>
                    <td>Individual</td>
                    <td>Ally</td>
                    <td>WHO, EU Parliament</td>
                    <td>Pushed COVID lockdowns, now AI regulation; GSK shares raise conflict concerns.</td>
                </tr>
                <tr>
                    <td>Bill Gates</td>
                    <td>Individual</td>
                    <td>Ally</td>
                    <td>Microsoft, Big Pharma</td>
                    <td>Funded COVID vaccines, now invests in AI ethics and startups.</td>
                </tr>
                <tr>
                    <td>Google</td>
                    <td>Company</td>
                    <td>Ally</td>
                    <td>Microsoft, US Government</td>
                    <td>COVID data platforms, now AI ethics and Gemini development.</td>
                </tr>
                <tr>
                    <td>Microsoft</td>
                    <td>Company</td>
                    <td>Ally</td>
                    <td>Gates, Google</td>
                    <td>COVID vaccine data, now OpenAI and regulation advocacy.</td>
                </tr>
                <tr>
                    <td>WHO</td>
                    <td>Organization</td>
                    <td>Echo</td>
                    <td>Vallance, CNN</td>
                    <td>COVID mandates, now AI healthcare regulation push.</td>
                </tr>
                <tr>
                    <td>CNN</td>
                    <td>Media</td>
                    <td>Echo</td>
                    <td>Vallance, Gates</td>
                    <td>Amplified COVID fear, now AI risk narratives.</td>
                </tr>
            </table>

            <div class="conclusion-box">
                <h3 style="color: white; border: none; padding: 0; margin-bottom: 15px;">Strategic Assessment</h3>
                <p>
                    The pivot from COVID to AI ethics narratives reflects a coordinated effort by key players like Vallance, Gates, Google, and Microsoft to maintain influence across crises. Alliances (Vallance-WHO, Gates-Microsoft) and media echo chambers (CNN) amplify fear-based control tactics, from lockdowns to AI regulation. Financial ties (e.g., GSK, AI startups) suggest profit motives, potentially at public expense. Ongoing monitoring of X posts, financial records, and policy shifts is critical to detect manipulation and protect public discourse.
                </p>
            </div>
        </div>

        <div class="disclaimer">
            <h4>‚ö†Ô∏è Important Disclaimers & Limitations</h4>
            
            <div class="warning">
                <strong>Experimental Analysis Tool:</strong> This report is generated by an experimental AI system designed for narrative pattern analysis. Findings are algorithmic interpretations of publicly available data and should not be considered definitive intelligence.
            </div>

            <p><strong>Data Sources & Accuracy:</strong> Information is aggregated from X posts, news articles, and public records. The AI may misinterpret context or miss nuances. All claims, especially financial ties, require independent verification.</p>

            <p><strong>Bias & Limitations:</strong> Analysis may reflect Western/English-language bias due to data sources. Some connections (e.g., Vallance‚Äôs AI investments) lack conclusive evidence and are speculative.</p>

            <p><strong>Relationship Interpretations:</strong> Ally, echo, and other classifications are based on public patterns, not confirmed partnerships or motives.</p>

            <p><strong>Not Investment or Legal Advice:</strong> This report is for informational purposes only and does not constitute professional advice. Consult qualified experts for decisions.</p>

            <p style="text-align: center; margin-top: 25px; font-size: 0.85em; opacity: 0.7;">
                Generated by Autonomous Intelligence Analysis System ‚Ä¢ Report Generated: <span id="timestamp"></span>
            </p>
        </div>
    </div>

    <script>
        document.getElementById('timestamp').textContent = new Date().toLocaleString();
    </script>

    <script>
        const canvas = document.getElementById('mindMap');
        const ctx = canvas.getContext('2d');

        const nodes = [
            { id: 'Vallance', label: 'Patrick\nVallance', x: 400, y: 120, color: '#e74c3c', size: 50, type: 'individual' },
            { id: 'Gates', label: 'Bill\nGates', x: 120, y: 250, color: '#3498db', size: 45, type: 'individual' },
            { id: 'Google', label: 'Google', x: 680, y: 250, color: '#2ecc71', size: 45, type: 'company' },
            { id: 'Microsoft', label: 'Microsoft', x: 180, y: 420, color: '#9b59b6', size: 40, type: 'company' },
            { id: 'WHO', label: 'WHO', x: 280, y: 180, color: '#f39c12', size: 38, type: 'organization' },
            { id: 'CNN', label: 'CNN', x: 520, y: 160, color: '#7f8c8d', size: 35, type: 'media' }
        ];

        const edges = [
            { from: 'Vallance', to: 'WHO', type: 'ally', label: 'Ally', color: '#2ecc71', width: 3 },
            { from: 'Vallance', to: 'CNN', type: 'echo', label: 'Amplifies', color: '#3498db', width: 2 },
            { from: 'Gates', to: 'Microsoft', type: 'ally', label: 'Ally', color: '#2ecc71', width: 2 },
            { from: 'Gates', to: 'CNN', type: 'echo', label: 'Amplifies', color: '#3498db', width: 2 },
            { from: 'Google', to: 'Microsoft', type: 'ally', label: 'Tech Ally', color: '#2ecc71', width: 2 },
            { from: 'Google', to: 'CNN', type: 'echo', label: 'Amplifies', color: '#3498db', width: 2 },
            { from: 'WHO', to: 'CNN', type: 'echo', label: 'Amplifies', color: '#3498db', width: 2 }
        ];

        const nodeDetails = {
            'Vallance': {
                description: 'Pushed COVID lockdowns and vaccines as UK Chief Scientific Adviser, now Science Minister advocating AI regulation. Held GSK shares during COVID.',
                connections: ['Allies with WHO, EU', 'Amplified by CNN', 'Financial ties to GSK, Isomorphic']
            },
            'Gates': {
                description: 'Funded COVID vaccines (CEPI, GAVI), now invests in AI startups and ethics discussions. Influences global health and tech narratives.',
                connections: ['Allies with Microsoft, Big Pharma', 'Amplified by CNN']
            },
            'Google': {
                description: 'Provided COVID data platforms, now leads AI development (Gemini) and ethics advocacy, potentially shaping regulation.',
                connections: ['Allies with Microsoft, US Government', 'Amplified by CNN']
            },
            'Microsoft': {
                description: 'Supported COVID vaccine data platforms, now invests in AI (OpenAI) and regulation frameworks.',
                connections: ['Allies with Gates, Google', 'Amplified by CNN']
            },
            'WHO': {
                description: 'Drove COVID health mandates, now pushes AI in healthcare regulation, influencing global policy.',
                connections: ['Allies with Vallance', 'Amplified by CNN']
            },
            'CNN': {
                description: 'Amplified COVID fear narratives (case counts, mandates), now highlights AI risks and regulation needs.',
                connections: ['Amplifies Vallance, Gates, Google, WHO']
            }
        };

        edges.forEach(edge => {
            const fromNode = nodes.find(n => n.id === edge.from);
            const toNode = nodes.find(n => n.id === edge.to);
            
            const dx = toNode.x - fromNode.x;
            const dy = toNode.y - fromNode.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            const fromRadius = fromNode.size;
            const toRadius = toNode.size;
            
            const startX = fromNode.x + (dx / distance) * fromRadius;
            const startY = fromNode.y + (dy / distance) * fromRadius;
            const endX = toNode.x - (dx / distance) * toRadius;
            const endY = toNode.y - (dy / distance) * toRadius;
            
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.strokeStyle = edge.color;
            ctx.lineWidth = edge.width;
            ctx.setLineDash(edge.type === 'shadow' ? [5, 5] : []);
            ctx.stroke();
            ctx.setLineDash([]);
            
            const angle = Math.atan2(dy, dx);
            const arrowLength = 15;
            ctx.beginPath();
            ctx.moveTo(endX, endY);
            ctx.lineTo(endX - arrowLength * Math.cos(angle - Math.PI/6), endY - arrowLength * Math.sin(angle - Math.PI/6));
            ctx.moveTo(endX, endY);
            ctx.lineTo(endX - arrowLength * Math.cos(angle + Math.PI/6), endY - arrowLength * Math.sin(angle + Math.PI/6));
            ctx.stroke();
            
            const midX = (startX + endX) / 2;
            const midY = (startY + endY) / 2;
            
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fillRect(midX - 20, midY - 18, 40, 16);
            ctx.strokeStyle = edge.color;
            ctx.lineWidth = 1;
            ctx.strokeRect(midX - 20, midY - 18, 40, 16);
            
            ctx.fillStyle = edge.color;
            ctx.font = 'bold 11px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(edge.label, midX, midY - 10);
        });

        nodes.forEach(node => {
            const gradient = ctx.createRadialGradient(node.x - 10, node.y - 10, 0, node.x, node.y, node.size);
            gradient.addColorStop(0, node.color);
            gradient.addColorStop(1, node.color + '80');
            
            ctx.beginPath();
            ctx.arc(node.x, node.y, node.size, 0, 2 * Math.PI);
            ctx.fillStyle = gradient;
            ctx.fill();
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
            ctx.shadowBlur = 2;
            
            const lines = node.label.split('\n');
            const lineHeight = 14;
            const startY = node.y - ((lines.length - 1) * lineHeight) / 2;
            
            lines.forEach((line, index) => {
                ctx.fillText(line, node.x, startY + index * lineHeight);
            });
            
            ctx.shadowBlur = 0;
        });

        let hoveredNode = null;
        let selectedNode = null;
        const tooltip = document.createElement('div');
        tooltip.style.cssText = `
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            display: none;
            max-width: 200px;
            line-height: 1.4;
        `;
        document.body.appendChild(tooltip);

        function drawMindMap() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            edges.forEach(edge => {
                const fromNode = nodes.find(n => n.id === edge.from);
                const toNode = nodes.find(n => n.id === edge.to);
                
                const dx = toNode.x - fromNode.x;
                const dy = toNode.y - fromNode.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                const fromRadius = fromNode.size;
                const toRadius = toNode.size;
                
                const startX = fromNode.x + (dx / distance) * fromRadius;
                const startY = fromNode.y + (dy / distance) * fromRadius;
                const endX = toNode.x - (dx / distance) * toRadius;
                const endY = toNode.y - (dy / distance) * toRadius;
                
                const isHighlighted = (hoveredNode && (hoveredNode.id === edge.from || hoveredNode.id === edge.to)) ||
                                    (selectedNode && (selectedNode.id === edge.from || selectedNode.id === edge.to));
                
                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.strokeStyle = isHighlighted ? edge.color : edge.color + '60';
                ctx.lineWidth = isHighlighted ? edge.width + 1 : edge.width;
                ctx.setLineDash(edge.type === 'shadow' ? [5, 5] : []);
                ctx.stroke();
                ctx.setLineDash([]);
                
                const angle = Math.atan2(dy, dx);
                const arrowLength = 15;
                ctx.beginPath();
                ctx.moveTo(endX, endY);
                ctx.lineTo(endX - arrowLength * Math.cos(angle - Math.PI/6), endY - arrowLength * Math.sin(angle - Math.PI/6));
                ctx.moveTo(endX, endY);
                ctx.lineTo(endX - arrowLength * Math.cos(angle + Math.PI/6), endY - arrowLength * Math.sin(angle + Math.PI/6));
                ctx.stroke();
                
                if (isHighlighted) {
                    const midX = (startX + endX) / 2;
                    const midY = (startY + endY) / 2;
                    
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                    ctx.fillRect(midX - 25, midY - 20, 50, 18);
                    ctx.strokeStyle = edge.color;
                    ctx.lineWidth = 2;
                    ctx.strokeRect(midX - 25, midY - 20, 50, 18);
                    
                    ctx.fillStyle = edge.color;
                    ctx.font = 'bold 12px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(edge.label, midX, midY - 11);
                }
            });

            nodes.forEach(node => {
                const isHovered = hoveredNode && hoveredNode.id === node.id;
                const isSelected = selectedNode && selectedNode.id === node.id;
                const isHighlighted = isHovered || isSelected;
                
                ctx.beginPath();
                ctx.arc(node.x + 3, node.y + 3, node.size + (isHighlighted ? 5 : 0), 0, 2 * Math.PI);
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fill();
                
                const gradient = ctx.createRadialGradient(node.x - 10, node.y - 10, 0, node.x, node.y, node.size + (isHighlighted ? 5 : 0));
                gradient.addColorStop(0, node.color);
                gradient.addColorStop(1, isHighlighted ? node.color : node.color + '80');
                
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.size + (isHighlighted ? 5 : 0), 0, 2 * Math.PI);
                ctx.fillStyle = gradient;
                ctx.fill();
                ctx.strokeStyle = isSelected ? '#FFD700' : '#fff';
                ctx.lineWidth = isSelected ? 5 : 3;
                ctx.stroke();
                
                ctx.fillStyle = '#fff';
                ctx.font = `bold ${isHighlighted ? 13 : 12}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
                ctx.shadowBlur = 2;
                
                const lines = node.label.split('\n');
                const lineHeight = 14;
                const startY = node.y - ((lines.length - 1) * lineHeight) / 2;
                
                lines.forEach((line, index) => {
                    ctx.fillText(line, node.x, startY + index * lineHeight);
                });
                
                ctx.shadowBlur = 0;
            });
        }

        function getNodeAt(x, y) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            const canvasX = (x - rect.left) * scaleX;
            const canvasY = (y - rect.top) * scaleY;
            
            return nodes.find(node => {
                const dx = canvasX - node.x;
                const dy = canvasY - node.y;
                return Math.sqrt(dx * dx + dy * dy) <= node.size + 5;
            });
        }

        function showTooltip(node, x, y) {
            const details = nodeDetails[node.id];
            tooltip.innerHTML = `
                <strong>${node.label.replace('\n', ' ')}</strong><br>
                ${details.description}<br><br>
                <em>Key Relationships:</em><br>
                ${details.connections.map(c => `‚Ä¢ ${c}`).join('<br>')}
            `;
            tooltip.style.left = x + 15 + 'px';
            tooltip.style.top = y - 10 + 'px';
            tooltip.style.display = 'block';
        }

        function hideTooltip() {
            tooltip.style.display = 'none';
        }

        canvas.addEventListener('mousemove', (e) => {
            const node = getNodeAt(e.clientX, e.clientY);
            if (node !== hoveredNode) {
                hoveredNode = node;
                drawMindMap();
                
                if (node) {
                    canvas.style.cursor = 'pointer';
                    showTooltip(node, e.clientX, e.clientY);
                } else {
                    canvas.style.cursor = 'default';
                    hideTooltip();
                }
            } else if (node) {
                showTooltip(node, e.clientX, e.clientY);
            }
        });

        canvas.addEventListener('mouseleave', () => {
            hoveredNode = null;
            hideTooltip();
            canvas.style.cursor = 'default';
            drawMindMap();
        });

        canvas.addEventListener('click', (e) => {
            const node = getNodeAt(e.clientX, e.clientY);
            if (node) {
                selectedNode = selectedNode && selectedNode.id === node.id ? null : node;
                drawMindMap();
                
                if (selectedNode) {
                    const reportSection = document.querySelector('.report');
                    reportSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        });

        function resizeCanvas() {
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            const scale = Math.min(1, rect.width / 800);
            
            canvas.style.width = (800 * scale) + 'px';
            canvas.style.height = (600 * scale) + 'px';
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        drawMindMap();
    </script>
</body>
</html>
